# ğŸ“Œ Jetpack Compose çš„ Material ç»„ä»¶

## **ğŸ“– Material components in Compose**
**Jetpack Compose æä¾›äº† Material Design çš„å®ç°**ï¼Œåè€…æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºæ•°å­—ç•Œé¢çš„ç»¼åˆè®¾è®¡ç³»ç»Ÿã€‚
æ‚¨å¯ä»¥ä½¿ç”¨ **å¯ç»„åˆå‡½æ•°ï¼ˆComposable functionsï¼‰** æ¥å®ç° Material ç»„ä»¶ã€‚

ğŸ‘‰ å®˜æ–¹æ–‡æ¡£ï¼š[Compose Material ç»„ä»¶](https://developer.android.com/develop/ui/compose/components?hl=zh-cn)

---

## **ğŸŒŸ é‡è¦æ¦‚å¿µ**

### **1ï¸âƒ£ Material ç»„ä»¶çš„ä½œç”¨**
- è¿™äº›ç»„ä»¶ **åŠ å¿«å¼€å‘**ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»º UIã€‚
- **åŸºæœ¬çš„ `Row` å’Œ `Column` ä¹Ÿå¯ä»¥ä½¿ç”¨**ï¼Œä½†å¯¹äºå¤æ‚äº¤äº’ï¼ˆå¦‚ `Dialog`ï¼‰ï¼Œä½¿ç”¨ Material ç»„ä»¶æ›´æ–¹ä¾¿ã€‚

### **2ï¸âƒ£ Material Design æ˜¯ä¸€ä¸ªè§„èŒƒ**
- Material ç»„ä»¶ä¸ä»…ä»…æ˜¯å·¥å…·ï¼Œå®ƒä»¬éµå¾ª Google è®¾è®¡è§„èŒƒã€‚
- åœ¨å®˜æ–¹æ•™ç¨‹çš„ [ç¬¬ä¸‰éƒ¨åˆ†](https://developer.android.com/develop/ui/compose/tutorial?hl=zh-cn) ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™äº›è§„èŒƒçš„åº”ç”¨ã€‚

---

## **ğŸ¨ Material Design ä¸‰å¤§è¦ç´ **
Material Design ä¸»è¦å›´ç»•ä»¥ä¸‹ **ä¸‰å¤§è¦ç´ ** æ„å»ºï¼š

| ğŸ”¹ è¦ç´  | ğŸ“Œ è¯´æ˜ |
| --- | --- |
| ğŸ¨ **Colorï¼ˆé¢œè‰²ï¼‰** | é¢œè‰²ç³»ç»Ÿï¼ŒåŒ…æ‹¬ä¸»é¢˜è‰²ã€èƒŒæ™¯è‰²ã€å¼ºè°ƒè‰²ç­‰ã€‚ |
| ğŸ”¤ **Typographyï¼ˆæ’ç‰ˆï¼‰** | æ–‡å­—æ ·å¼ï¼Œå¦‚å­—ä½“ã€å¤§å°ã€é—´è·ç­‰ã€‚ |
| ğŸŸ¦ **Shapeï¼ˆå½¢çŠ¶ï¼‰** | ç»„ä»¶çš„å½¢çŠ¶ï¼Œå¦‚åœ†è§’ã€å¡ç‰‡è¾¹æ¡†ç­‰ã€‚ |

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé€æ­¥æ·»åŠ è¿™äº›è¦ç´ ï¼Œä»¥æ„å»ºç¬¦åˆ Material Design è§„èŒƒçš„ UIã€‚



-------------


# ğŸ“Œ Compose ä¸­çš„å®¹å™¨ Composable

åœ¨ **Jetpack Compose** ä¸­ï¼Œä»¥ä¸‹ **Composable** å¯ä»¥ä½œä¸º **å®¹å™¨** æ¥åŒ…å«å…¶ä»– Composableï¼š

| ğŸ“Œ Composable | ğŸ” ç±»ä¼¼äº |
| --- | --- |
| `Column` | `LinearLayout`ï¼ˆçºµå‘æ’åˆ—ï¼‰ |
| `Row` | `LinearLayout`ï¼ˆæ¨ªå‘æ’åˆ—ï¼‰ |
| `Box` | `FrameLayout` |
| `ConstraintLayout` | `ConstraintLayout` |
| `LazyColumn` | `RecyclerView` |

---

## **ğŸ“ Button ä½œä¸ºå®¹å™¨**
é»˜è®¤æƒ…å†µä¸‹ï¼Œ`Button` ä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒå¯ä»¥åŒ…å« **å¤šä¸ª Composable**ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡æœ¬ã€‚

### **ç¤ºä¾‹ï¼šButton ä½œä¸ºå®¹å™¨**
```kotlin
@Composable
fun MyColumnLayout() {
    Column(modifier = Modifier.fillMaxSize().padding(16.dp)) {
        Text("ç¬¬ä¸€è¡Œ")
        Text("ç¬¬äºŒè¡Œ")
        Button(onClick = {}) {
            Text("æŒ‰é’®") // âœ… Button å†…éƒ¨å¯ä»¥åŒ…å« Text
        }
    }
}
```
**ğŸ“Œ ç»“è®ºï¼š**
`Button` ä½œä¸ºä¸€ä¸ª **å®¹å™¨**ï¼Œæ„å‘³ç€å®ƒé»˜è®¤æ²¡æœ‰è®¾ç½®æ–‡æœ¬çš„å±æ€§ï¼Œè€Œæ˜¯å¯ä»¥ **è‡ªç”±æ”¾å…¥å…¶ä»– Composable**ï¼ˆå¦‚ `Icon`ã€`Row`ã€`Column` ç­‰ï¼‰ã€‚

---

## **ğŸ” Button ç»„ä»¶çš„å®Œæ•´å®šä¹‰**
åœ¨ Jetpack Compose ä¸­ï¼Œ`Button` ç»„ä»¶çš„å®šä¹‰å¦‚ä¸‹ï¼š
```kotlin
@Composable
fun Button(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    enabled: Boolean = true,
    shape: Shape = ButtonDefaults.shape,
    colors: ButtonColors = ButtonDefaults.buttonColors(),
    elevation: ButtonElevation? = ButtonDefaults.buttonElevation(),
    border: BorderStroke? = null,
    contentPadding: PaddingValues = ButtonDefaults.ContentPadding,
    interactionSource: MutableInteractionSource? = null,
    content: @Composable RowScope.() -> Unit
)
```
ğŸ“Œ **å…³é”®ç‚¹è§£æï¼š**
- `onClick: () -> Unit` ğŸ‘‰ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
- `modifier: Modifier` ğŸ‘‰ æ§åˆ¶ **å¤§å°ã€å¡«å……ã€å¯¹é½æ–¹å¼**
- `enabled: Boolean` ğŸ‘‰ æ˜¯å¦å¯ç‚¹å‡»
- `shape: Shape` ğŸ‘‰ æŒ‰é’®å½¢çŠ¶ï¼ˆé»˜è®¤ `ButtonDefaults.shape`ï¼‰
- `colors: ButtonColors` ğŸ‘‰ æŒ‰é’®é¢œè‰²
- `elevation: ButtonElevation?` ğŸ‘‰ æŒ‰é’®é˜´å½±
- `border: BorderStroke?` ğŸ‘‰ æŒ‰é’®è¾¹æ¡†
- `contentPadding: PaddingValues` ğŸ‘‰ æŒ‰é’®å†…éƒ¨çš„ **å†…è¾¹è·**
- `interactionSource: MutableInteractionSource?` ğŸ‘‰ å¤„ç†äº¤äº’æ•ˆæœ
- `content: @Composable RowScope.() -> Unit` ğŸ‘‰ **æŒ‰é’®å†…éƒ¨çš„å†…å®¹ï¼ˆå¯æ”¾å¤šä¸ª Composableï¼‰**

---

ğŸ“Œ **æ€»ç»“**
1. `Button` **ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„æŒ‰é’®**ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª **å¯å®¹çº³å¤šä¸ªå­ Composable çš„å®¹å™¨**ã€‚
2. ç”±äº `Button` ä½¿ç”¨äº† `RowScope`ï¼Œæ‰€ä»¥å®ƒçš„ `content` å¯ä»¥æ˜¯ **å¤šä¸ª Composable** ç»„ä»¶ã€‚
3. **å¯ä»¥åœ¨ Button é‡Œæ”¾ `Row`ã€`Icon`ã€`Text` ç­‰**ï¼Œçµæ´»æ„å»ºæŒ‰é’® UIã€‚

ğŸš€ **Jetpack Compose å…è®¸ä½ åˆ›å»ºæ›´åŠ è‡ªç”±ã€çµæ´»çš„ UI ç»„ä»¶ï¼**


----------


# ğŸš€ Jetpack Compose å¸¸ç”¨ç»„ä»¶ä»‹ç»

| ç»„ä»¶ | ä½œç”¨ |
| --- | --- |
| `Scaffold` | é¡µé¢åŸºç¡€æ¡†æ¶ï¼Œæ”¯æŒ `TopAppBar`ã€`BottomBar`ã€`Drawer` ç­‰ |
| `TopAppBar` / `CenterAlignedTopAppBar` | é¡¶éƒ¨æ ï¼ˆå¯æ·»åŠ å¯¼èˆªæŒ‰é’®ã€èœå•ç­‰ï¼‰ |
| `NavigationBar` | åº•éƒ¨å¯¼èˆªæ ï¼ˆé€šå¸¸ç”¨äº `BottomNavigation`ï¼‰ |
| `DrawerSheet` | ä¾§è¾¹æŠ½å±‰èœå• |
| `Button` / `OutlinedButton` / `TextButton` | æŒ‰é’®ï¼ˆä¸»è¦äº¤äº’å…ƒç´ ï¼‰ |
| `TextField` / `OutlinedTextField` | è¾“å…¥æ¡† |
| `Card` | å¡ç‰‡æ ·å¼å®¹å™¨ |
| `Dialog` | å¯¹è¯æ¡† |
| `Snackbar` | çŸ­æš‚æ¶ˆæ¯æç¤º |
| `Checkbox` / `Switch` / `RadioButton` | é€‰æ‹©æ§ä»¶ |
| `LazyColumn` / `LazyRow` | å¯æ»šåŠ¨çš„åˆ—è¡¨ |



---------------------


# ğŸš€ Jetpack Compose æ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²ï¼Ÿ

åœ¨ **Jetpack Compose** ä¸­ï¼Œ**ç†è®ºä¸Šä¸ä¼šåƒä¼ ç»Ÿ View é‚£æ ·å®¹æ˜“å‘ç”Ÿå†…å­˜æ³„éœ²**ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ**ä»ç„¶å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²**ï¼Œä¸»è¦æ¥æºåŒ…æ‹¬ï¼š

---

## **ğŸš¨ å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²çš„æƒ…å†µ**

### **1. è®°ä½äº† `Activity` æˆ– `Fragment` çš„å¼•ç”¨**
åœ¨ `remember`ã€`rememberSaveable` æˆ– `LaunchedEffect` é‡Œï¼Œå¦‚æœä½ **é”™è¯¯åœ°å­˜å‚¨äº† `Activity`/`Context` çš„å¼•ç”¨**ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚

**âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆä¼šå¯¼è‡´ Activity æ³„éœ²ï¼‰ï¼š**
```kotlin
val activity = LocalContext.current as Activity
val myObject = remember { SomeObject(activity) }  // âŒ æŒæœ‰ Activity å¼•ç”¨
```

**âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ `WeakReference` æˆ–é¿å…å­˜å‚¨ Context**
```kotlin
val context = LocalContext.current.applicationContext // âœ… åªå­˜ ApplicationContext
val myObject = remember { SomeObject(context) }
```

---

### **2. `LaunchedEffect`ã€`DisposableEffect` æ²¡æœ‰æ­£ç¡®é‡Šæ”¾èµ„æº**
`LaunchedEffect` æˆ– `DisposableEffect` åœ¨ `Composition` å‘ç”Ÿå˜åŒ–æ—¶å¯èƒ½ä¼šä¿ç•™ä¸å¿…è¦çš„å¯¹è±¡ï¼Œå¯¼è‡´èµ„æºæ— æ³•é‡Šæ”¾ã€‚

**âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆç›‘å¬ ViewModelï¼Œä½†æ²¡æœ‰æ­£ç¡®å–æ¶ˆï¼‰ï¼š**
```kotlin
LaunchedEffect(Unit) {
    viewModel.dataFlow.collect { data ->
        // å¤„ç†æ•°æ®
    }
} // âŒ å¦‚æœ ViewModel ç”Ÿå‘½å‘¨æœŸæ¯” Composable çŸ­ï¼Œå¯èƒ½å¯¼è‡´æ³„éœ²
```

**âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ `collectAsState`**
```kotlin
val data by viewModel.dataFlow.collectAsState()
```

---

### **3. `rememberCoroutineScope()` åœ¨ `Composition` å¤–éƒ¨ä½¿ç”¨**
**âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆä½¿ç”¨ `rememberCoroutineScope()` ä½†æ²¡æœ‰æ‰‹åŠ¨å–æ¶ˆï¼‰ï¼š**
```kotlin
val coroutineScope = rememberCoroutineScope()
coroutineScope.launch {
    // æ‰§è¡Œé•¿æ—¶é—´ä»»åŠ¡
}
```

**âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ `LaunchedEffect` æˆ– `rememberUpdatedState`**
```kotlin
LaunchedEffect(Unit) {
    // åœ¨ Composable ç”Ÿå‘½å‘¨æœŸå†…ç®¡ç†åç¨‹
}
```

---

### **4. `CompositionLocal` ä¸å½“ä½¿ç”¨**
å¦‚æœ `CompositionLocal` å­˜å‚¨äº†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ï¼ˆæ¯”å¦‚ `Context`ï¼‰ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡è¢« `Composable` é•¿æ—¶é—´æŒæœ‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚

**âœ… é¿å…ç›´æ¥å­˜ `Activity`ï¼Œç”¨ `ApplicationContext`**
```kotlin
val context = LocalContext.current.applicationContext
```

---

## **ğŸ“Œ ç»“è®º**
**Jetpack Compose ç›¸æ¯”ä¼ ç»Ÿ Viewï¼Œæ›´ä¸å®¹æ˜“å‘ç”Ÿå†…å­˜æ³„éœ²**ï¼Œä½†ä»éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š
- **ä¸è¦åœ¨ `remember` é‡Œå­˜ `Activity`ï¼Œæ”¹ç”¨ `ApplicationContext`**
- **æ­£ç¡®ä½¿ç”¨ `LaunchedEffect`ï¼Œé¿å…é•¿æ—¶é—´æŒæœ‰ `ViewModel`**
- **åˆç†ç®¡ç†åç¨‹ï¼Œç¡®ä¿ `CoroutineScope` åœ¨ `Composition` ç»“æŸæ—¶è¢«é‡Šæ”¾**
- **`DisposableEffect` ç”¨äºé‡Šæ”¾èµ„æº**

**å¦‚æœæ­£ç¡®ä½¿ç”¨ `remember`ã€`LaunchedEffect`ã€`ViewModel`ï¼ŒåŸºæœ¬ä¸ä¼šå‘ç”Ÿæ³„éœ²ï¼ğŸš€**


















































































































































































































































































































































































































































































































